# Migration `20200817132940-course-improve`

This migration has been generated by Taykavol at 8/17/2020, 4:29:40 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "Category" AS ENUM ('Openings', 'Middlegame', 'Endgame', 'Games', 'Basics');

CREATE TABLE "public"."Course" (
"id" SERIAL,
"title" text  NOT NULL DEFAULT E'',
"subtitle" text  NOT NULL DEFAULT E'',
"authorId" integer   ,
"description" text   DEFAULT E'',
"category" "Category" NOT NULL DEFAULT E'Basics',
"level" text   ,
"status" "Status"  DEFAULT E'BUILDING',
"price" Decimal(65,30)  NOT NULL DEFAULT 9.99,
"curriculum" text   ,
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id"))

ALTER TABLE "public"."Course" ADD FOREIGN KEY ("authorId")REFERENCES "public"."instructorProfile"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."_CourseToUser" ADD FOREIGN KEY ("A")REFERENCES "public"."Course"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200815135015-curruculum..20200817132940-course-improve
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -31,13 +31,14 @@
 }
 model Course {
 id Int @default(autoincrement()) @id
-name String? @default("")
+title String @default("")
+subtitle String @default("")
 author instructorProfile? @relation(fields: [authorId],references:[id])
 authorId Int?
 description String? @default("")
-category String?
+category Category @default(Basics)
 level String?
 status Status? @default(BUILDING)
 registedStudents User[] @relation(references: [id])
 price Float @default(9.99)
@@ -102,9 +103,15 @@
 //   fen String
 //   moves String[]
 //   helps String[]
 // }
-
+enum Category {
+  Openings
+  Middlegame
+  Endgame
+  Games
+  Basics
+} 
 enum Status {
 BUILDING
 VERIFYING
 PUBLISH
```


